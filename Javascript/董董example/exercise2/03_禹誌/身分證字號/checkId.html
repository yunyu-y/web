<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<label for="check">身份證字號驗證</label><input type="text" id="check"><input type="button" id="out1" value="檢查">
	<script>
		function $0(e){
			return document.querySelector(e);
		}

		// $0('#out').addEventListener('click',function(){
		// 	var char,acc,sum=0,regExpID=/^[a-z](1|2)\d{8}$/i;
		// 	var str=$0('#check').innerText;
		// 	if(str.search(regExpID)==-1){alert("請仔細填寫身份證號碼");
		// 	return 
		// }else{
		// 	char=str.charAt(0).toUpperCase();
		// 	acc=str.charAt(9);
		// }
		// });
		function check(){
			var data={A:"10",B:"11",C:"12",D:"13",E:"14",F:"15",G:"16",H:"17",J:"18",K:"19",L:"20",M:"21",N:"22",P:"23",Q:"24",R:"25",S:"26",T:"27",U:"28",V:"29",X:"30",Y:"31",W:"32",Z:"33",I:"34",O:"35"}
			var id=$0('#check').value;
			var re_id=id.split('').reverse().join('');
			var firstnum,lastnum,firstchar,sum=0;
			
			console.log(re_id);
			if(re_id.search(/^\d{8}(1|2)[a-z]$/i)==-1){
				 alert("請仔細填寫身份證號碼");return
			}else{
				firstChar = re_id.charAt(9).toUpperCase();
				console.log(firstChar);
				// lastNum = re_id.charAt(0);
				console.log(lastNum);
			}
			var arrid=id.split("").reverse();
			console.log(arrid);
			arrid.pop();
			arrid.push(parseInt(data[firstChar].charAt(1)));
			var sum=parseInt(data[firstChar].charAt(0));
			console.log(arrid);
			for(var i in arrid){
				sum += i*arrid[i];
			}
			// var data_0=parseInt(data[firstChar].charAt(0));
			// sum+=data_0;
			console.log(sum);
			// console.log(data_0);
			console.log(parseInt(data[firstChar]));
			if(10 - (sum % 10) ==id.charAt(9) ){alert(`驗證通過!!`);
			}else{
				alert(`驗證錯誤!!`);
			}
		}
		$0('#out1').addEventListener('click',check);
// function checkID(){
//   // 依照字母的編號排列，存入陣列備用。
//   var letters = new Array('A', 'B', 'C', 'D', 
//       'E', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 
//       'N', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 
//       'X', 'Y', 'W', 'Z', 'I', 'O');
//   // 儲存各個乘數
//   var multiply = new Array(1, 9, 8, 7, 6, 5, 
//                            4, 3, 2, 1);
//   var nums = new Array(2);
//   var firstChar;
//   var firstNum;
//   var lastNum;
//   var total = 0;
//   // 撰寫「正規表達式」。第一個字為英文字母，
//   // 第二個字為1或2，後面跟著8個數字，不分大小寫。
//   var idStr=$0('#check').value;
//   var regExpID=/^[a-z](1|2)\d{8}$/i; 
//   // 使用「正規表達式」檢驗格式
//   if (idStr.search(regExpID)==-1) {
//     // 基本格式錯誤
// 	alert("請仔細填寫身份證號碼");
//    return false;
//   } else {
// 	// 取出第一個字元和最後一個數字。
// 	firstChar = idStr.charAt(0).toUpperCase();
// 	lastNum = idStr.charAt(9);
//   }
//   // 找出第一個字母對應的數字，並轉換成兩位數數字。
//   for (var i=0; i<26; i++) {
// 	if (firstChar == letters[i]) {
// 	  firstNum = i + 10;
// 	  nums[0] = Math.floor(firstNum / 10);
// 	  nums[1] = firstNum - (nums[0] * 10);
// 	  break;
// 	} 
//   }
//   // 執行加總計算
//   for(var i=0; i<multiply.length; i++){
//     if (i<2) {
//       total += nums[i] * multiply[i];
//     } else {
//       total += parseInt(idStr.charAt(i-1)) * 
//                multiply[i];
//     }
//   }
//   // 和最後一個數字比對
//   if ((10 - (total % 10))!= lastNum) {
// 	alert("身份證號碼寫錯了！");
// 	return false;
//   } 
//   return true;
// }

</script>
</body>
</html>