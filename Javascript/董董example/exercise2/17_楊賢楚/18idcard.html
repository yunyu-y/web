<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
  <style>
    div {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      padding: 20px;
    }

    #checkid {
      margin-left: 20px;
    }

    #state {
      display: block;
      margin: 0 auto;
    }
  </style>
</head>

<body>
  <form action="">
    <div>
      <label for="idtext">請輸入身分證字號：</label>
      <input type="text" id="idtext" value="">
      <input type="button" id="checkid" value="檢查身分證字號">
      <br>

    </div>
    <input type="text" id="state">
  </form>
  <script type="text/javascript">
    var state = document.getElementById('state')
    function init() {
      document.getElementById('checkid').addEventListener('click', function () {
        var idtext = document.getElementById("idtext").value;
        if (idtext.match(/^[A-Z][1-2][0-9]{8}$/)) {
          var area = [
            1 + 0 * 9,//A
            1 + 1 * 9,//B
            1 + 2 * 9,//C
            1 + 3 * 9,//D
            1 + 4 * 9,//E
            1 + 5 * 9,//F
            1 + 6 * 9,//G
            1 + 7 * 9,//H
            3 + 4 * 9,//I
            1 + 8 * 9,//J
            1 + 9 * 9,//K
            2 + 0 * 9,//L
            2 + 1 * 9,//M
            2 + 2 * 9,//N
            3 + 5 * 9,//O
            2 + 3 * 9,//P
            2 + 4 * 9,//Q
            2 + 5 * 9,//R
            2 + 6 * 9,//S
            2 + 7 * 9,//T
            2 + 8 * 9,//U
            2 + 9 * 9,//V
            3 + 2 * 9,//W
            3 + 0 * 9,//X
            3 + 1 * 9,//Y
            3 + 3 * 9,//Z
          ];
          var alphabet = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
          var verification = area[alphabet.indexOf(idtext.charAt(0))] + idtext.charAt(1) * 8 + idtext.charAt(2) * 7 + idtext.charAt(3) * 6 + idtext.charAt(4) * 5 + idtext.charAt(5) * 4 + idtext.charAt(6) * 3 + idtext.charAt(7) * 2 + idtext.charAt(8) * 1;
          verification = 10 - verification % 10;
          if (verification == idtext.charAt(9)) {
            state.value = "身分證驗證成功";
          }
          else if (verification == 10) {
            state.value = "身分證驗證成功"
          }
          else { state.value = '身分字號錯誤，請確認後重新輸入' }
        }
        else if (idtext.match(/^[a-z]\d{9}$/)) {
          state.value = "首字母應大寫";
        } else {
          state.value = "格式錯誤，請重新輸入"
        }
      })
    }
    window.addEventListener("load", init)
  </script>
</body>

</html>